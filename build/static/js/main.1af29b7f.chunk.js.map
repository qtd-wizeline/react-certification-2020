{"version":3,"sources":["utils/storage.js","providers/Auth/Auth.provider.jsx","utils/constants.js","pages/Home/Home.page.jsx","pages/Login/Login.page.jsx","pages/NotFound/NotFound.page.jsx","pages/Secret/Secret.page.jsx","components/Private/Private.component.jsx","utils/fns.js","utils/hooks/useFortune.js","components/Fortune/Fortune.component.jsx","components/Layout/Layout.component.jsx","components/App/App.component.jsx","index.js"],"names":["storage","key","rawValue","window","localStorage","getItem","JSON","parse","error","console","value","setItem","stringify","AuthContext","React","createContext","useAuth","context","useContext","Error","AuthProvider","children","useState","authenticated","setAuthenticated","useEffect","lastAuthState","isAuthenticated","Boolean","login","useCallback","logout","Provider","HomePage","history","useHistory","sectionRef","useRef","className","ref","to","onClick","event","preventDefault","push","LoginPage","onSubmit","htmlFor","required","type","id","NotFoundPage","src","alt","SecretPage","width","height","allowFullScreen","frameBorder","title","allow","Private","rest","render","random","limit","Math","floor","API_URL","Fortune","fortune","setFortune","a","fetch","response","json","fortuneCookies","randomIndex","length","currentFortune","message","findMyFortune","useFortune","Layout","App","useLayoutEffect","body","document","rotateBackground","xPercent","yPercent","style","setProperty","intervalId","setInterval","addEventListener","clearInterval","removeEventListener","exact","path","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1af29b7f.chunk.js","sourcesContent":["const storage = {\r\n  get(key) {\r\n    try {\r\n      const rawValue = window.localStorage.getItem(key);\r\n      return JSON.parse(rawValue);\r\n    } catch (error) {\r\n      console.error(`Error parsing storage item \"${key}\".`);\r\n      return null;\r\n    }\r\n  },\r\n\r\n  set(key, value) {\r\n    window.localStorage.setItem(key, JSON.stringify(value));\r\n  },\r\n};\r\n\r\nexport { storage };\r\n","import React, { useState, useEffect, useContext, useCallback } from 'react';\r\n\r\nimport { AUTH_STORAGE_KEY } from '../../utils/constants';\r\nimport { storage } from '../../utils/storage';\r\n\r\nconst AuthContext = React.createContext(null);\r\n\r\nfunction useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error(`Can't use \"useAuth\" without an AuthProvider!`);\r\n  }\r\n  return context;\r\n}\r\n\r\nfunction AuthProvider({ children }) {\r\n  const [authenticated, setAuthenticated] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const lastAuthState = storage.get(AUTH_STORAGE_KEY);\r\n    const isAuthenticated = Boolean(lastAuthState);\r\n\r\n    setAuthenticated(isAuthenticated);\r\n  }, []);\r\n\r\n  const login = useCallback(() => {\r\n    setAuthenticated(true);\r\n    storage.set(AUTH_STORAGE_KEY, true);\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setAuthenticated(false);\r\n    storage.set(AUTH_STORAGE_KEY, false);\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ login, logout, authenticated }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport { useAuth };\r\nexport default AuthProvider;\r\n","const AUTH_STORAGE_KEY = 'wa_cert_authenticated';\r\n\r\nexport { AUTH_STORAGE_KEY };\r\n","import React, { useRef } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nimport { useAuth } from '../../providers/Auth';\r\nimport './Home.styles.css';\r\n\r\nfunction HomePage() {\r\n  const history = useHistory();\r\n  const sectionRef = useRef(null);\r\n  const { authenticated, logout } = useAuth();\r\n\r\n  function deAuthenticate(event) {\r\n    event.preventDefault();\r\n    logout();\r\n    history.push('/');\r\n  }\r\n\r\n  return (\r\n    <section className=\"homepage\" ref={sectionRef}>\r\n      <h1>Hello stranger!</h1>\r\n      {authenticated ? (\r\n        <>\r\n          <h2>Good to have you back</h2>\r\n          <span>\r\n            <Link to=\"/\" onClick={deAuthenticate}>\r\n              ← logout\r\n            </Link>\r\n            <span className=\"separator\" />\r\n            <Link to=\"/secret\">show me something cool →</Link>\r\n          </span>\r\n        </>\r\n      ) : (\r\n        <Link to=\"/login\">let me in →</Link>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router';\r\n\r\nimport { useAuth } from '../../providers/Auth';\r\nimport './Login.styles.css';\r\n\r\nfunction LoginPage() {\r\n  const { login } = useAuth();\r\n  const history = useHistory();\r\n\r\n  function authenticate(event) {\r\n    event.preventDefault();\r\n    login();\r\n    history.push('/secret');\r\n  }\r\n\r\n  return (\r\n    <section className=\"login\">\r\n      <h1>Welcome back!</h1>\r\n      <form onSubmit={authenticate} className=\"login-form\">\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"username\">\r\n            <strong>username </strong>\r\n            <input required type=\"text\" id=\"username\" />\r\n          </label>\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"password\">\r\n            <strong>password </strong>\r\n            <input required type=\"password\" id=\"password\" />\r\n          </label>\r\n        </div>\r\n        <button type=\"submit\">login</button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './NotFound.styles.css';\r\n\r\nfunction NotFoundPage() {\r\n  return (\r\n    <section className=\"not-found\">\r\n      <Link to=\"/\" className=\"home-link\">\r\n        home\r\n      </Link>\r\n      <img src=\"404.gif\" alt=\"page not found\" />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default NotFoundPage;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction SecretPage() {\r\n  return (\r\n    <section>\r\n      <pre>\r\n        welcome, voyager...\r\n        <Link to=\"/\"> ← go back</Link>\r\n      </pre>\r\n      <iframe\r\n        width=\"800\"\r\n        height=\"450\"\r\n        allowFullScreen\r\n        frameBorder=\"0\"\r\n        title=\"rick roll\"\r\n        src=\"https://www.youtube.com/embed/dQw4w9WgXcQ?controls=0&autoplay=1\"\r\n        allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\r\n      />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default SecretPage;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nimport { useAuth } from '../../providers/Auth';\r\n\r\nfunction Private({ children, ...rest }) {\r\n  const { authenticated } = useAuth();\r\n\r\n  return (\r\n    <Route {...rest} render={() => (authenticated ? children : <Redirect to=\"/\" />)} />\r\n  );\r\n}\r\n\r\nexport default Private;\r\n","function random(limit) {\r\n  return Math.floor(Math.random() * limit);\r\n}\r\n\r\nexport { random };\r\n","import { useState, useEffect } from 'react';\r\n\r\nimport { random } from '../fns';\r\n\r\nconst API_URL = 'http://fortunecookieapi.herokuapp.com/v1/fortunes?limit=10';\r\n\r\nfunction useFortune() {\r\n  const [fortune, setFortune] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function findMyFortune() {\r\n      try {\r\n        const response = await fetch(API_URL);\r\n        const fortuneCookies = await response.json();\r\n\r\n        const randomIndex = random(fortuneCookies.length);\r\n        const currentFortune = fortuneCookies[randomIndex];\r\n\r\n        setFortune(currentFortune.message);\r\n      } catch (error) {\r\n        console.error('Bad fortune: ', error);\r\n      }\r\n    }\r\n\r\n    findMyFortune();\r\n  }, []);\r\n\r\n  return { fortune };\r\n}\r\n\r\nexport { useFortune };\r\n","import React from 'react';\r\n\r\nimport { useFortune } from '../../utils/hooks/useFortune';\r\nimport './Fortune.styles.css';\r\n\r\nfunction Fortune() {\r\n  const { fortune } = useFortune();\r\n\r\n  return <span className=\"fortune\">{fortune} </span>;\r\n}\r\n\r\nexport default Fortune;\r\n","import React from 'react';\r\n\r\nimport './Layout.styles.css';\r\n\r\nfunction Layout({ children }) {\r\n  return <main className=\"container\">{children}</main>;\r\n}\r\n\r\nexport default Layout;\r\n","import React, { useLayoutEffect } from 'react';\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\n\r\nimport AuthProvider from '../../providers/Auth';\r\nimport HomePage from '../../pages/Home';\r\nimport LoginPage from '../../pages/Login';\r\nimport NotFound from '../../pages/NotFound';\r\nimport SecretPage from '../../pages/Secret';\r\nimport Private from '../Private';\r\nimport Fortune from '../Fortune';\r\nimport Layout from '../Layout';\r\nimport { random } from '../../utils/fns';\r\n\r\nfunction App() {\r\n  useLayoutEffect(() => {\r\n    const { body } = document;\r\n\r\n    function rotateBackground() {\r\n      const xPercent = random(100);\r\n      const yPercent = random(100);\r\n      body.style.setProperty('--bg-position', `${xPercent}% ${yPercent}%`);\r\n    }\r\n\r\n    const intervalId = setInterval(rotateBackground, 3000);\r\n    body.addEventListener('click', rotateBackground);\r\n\r\n    return () => {\r\n      clearInterval(intervalId);\r\n      body.removeEventListener('click', rotateBackground);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <AuthProvider>\r\n        <Layout>\r\n          <Switch>\r\n            <Route exact path=\"/\">\r\n              <HomePage />\r\n            </Route>\r\n            <Route exact path=\"/login\">\r\n              <LoginPage />\r\n            </Route>\r\n            <Private exact path=\"/secret\">\r\n              <SecretPage />\r\n            </Private>\r\n            <Route path=\"*\">\r\n              <NotFound />\r\n            </Route>\r\n          </Switch>\r\n          <Fortune />\r\n        </Layout>\r\n      </AuthProvider>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './components/App';\r\nimport './global.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}